<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Vista del formulario del wizard -->
    <record id="view_product_move_report_wizard_form" model="ir.ui.view">
        <field name="name">product.move.report.wizard.form</field>
        <field name="model">product.move.report.wizard</field>
        <field name="arch" type="xml">
            <form string="Reporte de Movimientos por Producto">
                <!-- Selección del producto -->
                <group string="Producto">
                    <field name="product_id" options="{'no_create': True, 'no_edit': True}" />
                </group>

                <!-- Selección del almacén -->
                <group string="Almacén">
                    <field name="warehouse_id" options="{'no_create': True, 'no_edit': True}" />
                </group>

                <!-- Selección del período -->
                <group string="Período">
                    <field name="period_type" widget="radio" />
                </group>

                <!-- Campos para selección de semana -->
                <group attrs="{'invisible': [('period_type', '!=', 'week')]}">
                    <field name="week_year" attrs="{'required': [('period_type', '=', 'week')]}" />
                    <field name="week_month" attrs="{'required': [('period_type', '=', 'week')]}" />
                    <field name="week_number" attrs="{'required': [('period_type', '=', 'week')]}" />
                </group>

                <!-- Campos para selección de mes -->
                <group attrs="{'invisible': [('period_type', '!=', 'month')]}">
                    <field name="month_year" attrs="{'required': [('period_type', '=', 'month')]}" />
                    <field name="month" attrs="{'required': [('period_type', '=', 'month')]}" />
                </group>

                <!-- Campo para selección de año -->
                <group attrs="{'invisible': [('period_type', '!=', 'year')]}">
                    <field name="year" attrs="{'required': [('period_type', '=', 'year')]}" />
                </group>

                <!-- Campos para selección personalizada -->
                <group attrs="{'invisible': [('period_type', '!=', 'custom')]}"
                    string="Rango de Fechas Personalizado">
                    <field name="custom_date_from" string="Fecha de Inicio"
                        attrs="{'required': [('period_type', '=', 'custom')]}" />
                    <field name="custom_date_to" string="Fecha de Fin"
                        attrs="{'required': [('period_type', '=', 'custom')]}" />
                </group>

                <!-- Campos ocultos para las fechas calculadas -->
                <field name="date_start" invisible="1" />
                <field name="date_end" invisible="1" />

                <footer>
                    <button name="action_generate_report" string="Crear" type="object"
                        class="btn-primary" />
                    <button string="Cancelar" class="btn-secondary" special="cancel" />
                </footer>
            </form>
        </field>
    </record>

    <!-- Acción para abrir el wizard -->
    <record id="action_product_move_report_wizard" model="ir.actions.act_window">
        <field name="name">Submayor de Producto</field>
        <field name="res_model">product.move.report.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="view_product_move_report_wizard_form" />
    </record>

</odoo>