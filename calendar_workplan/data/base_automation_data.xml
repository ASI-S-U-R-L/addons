<?xml version="1.0"?>
<odoo>
        <!-- <data noupdate="1"> -->
        <data>

                <record id="hr_employee_job_title_sync_to_res_partner_function"
                        model="base.automation">
                        <field name="name">Update employee's related contacts function field from job title field</field>
                        <field name="model_id" ref="hr.model_hr_employee" />
                        <field name="trigger">on_create_or_write</field>
                        <field name="state">code</field>
                        <field name="trigger_field_ids"
                                search="[('model', '=', 'hr.employee'), ('name', '=', 'job_title')]"
                                model="ir.model.fields" />
                        <field name="code">
for emp in records:
  emp.sudo().related_contact_ids.filtered(lambda it: it.type == 'contact').update({'function': emp.job_title})
                        </field>
                </record>
        </data>
</odoo>
